/*!
 * fir-ui v0.9.0
 * (c) 2018-present fjc0k <fjc0kb@gmail.com>
 * Released under the MIT License.
 */
"use strict";function _interopDefault(e){return e&&"object"==typeof e&&"default"in e?e.default:e}var _toString=_interopDefault(require("lodash/toString")),_isArray=_interopDefault(require("lodash/isArray")),_forOwn=_interopDefault(require("lodash/forOwn")),createElement=_interopDefault(require("vue-css-modules/lib/create-element")),_upperFirst=_interopDefault(require("lodash/upperFirst")),_reduce=_interopDefault(require("lodash/reduce")),_isObjectLike=_interopDefault(require("lodash/isObjectLike")),_isFunction=_interopDefault(require("lodash/isFunction")),betterSync=_interopDefault(require("vue-better-sync")),_isBoolean=_interopDefault(require("lodash/isBoolean")),CSSModules=_interopDefault(require("vue-css-modules")),_isString=_interopDefault(require("lodash/isString")),_toNumber=_interopDefault(require("lodash/toNumber")),_findIndex=_interopDefault(require("lodash/findIndex")),_mapValues=_interopDefault(require("lodash/mapValues")),_has=_interopDefault(require("lodash/has")),_castArray=_interopDefault(require("lodash/castArray"));function genFunctionalData(){for(var e,t={},n=arguments.length;n--;)_forOwn(arguments[n],function(n,a,i){if(n)switch(a){case"class":case"style":case"directives":_isArray(t[a])||(t[a]=[]),t[a]=t[a].concat(n);break;case"staticClass":e=_toString(n).trim(),t[a]?t[a]+=" "+e:t[a]=e;break;case"attrs":case"props":case"domProps":case"scopedSlots":case"staticStyle":case"hook":case"transition":t[a]||(t[a]={}),t[a]=Object.assign({},n,t[a]);break;case"on":case"nativeOn":t[a]||(t[a]={}),_forOwn(n,function(e,n){t[a][n]?t[a][n]=[].concat(t[a][n],e):t[a][n]=e});break;default:t[a]||(t[a]=i[a])}});return t}var VNodeType={type:null,vnode:!0},styles={},Icon={name:"f-icon",functional:!0,props:{name:{type:String,required:!0}},render:function(e,t){var n=t.props,a=t.data;e=createElement(e,styles,n);var i=n.name,s="$"===i[0];return i=s?i.substr(1):i,s?e("i",genFunctionalData(a,{styleName:"@svg"}),[e("svg",[e("use",{attrs:{"xlink:href":"#"+i}})])]):e("i",genFunctionalData(a,{styleName:"@icon",staticClass:i}))}},styles$1={},BUTTON_TYPES=["default","primary","success","warning","danger"],button={name:"f-button",functional:!0,props:{type:{type:String,default:BUTTON_TYPES[0],validtor:function(e){return BUTTON_TYPES.indexOf(e)>=0}},icon:String,mini:Boolean,plain:Boolean,inline:Boolean,disabled:Boolean,whiteSpace:Boolean},render:function(e,t){var n=t.props,a=t.data,i=t.children;e=createElement(e,styles$1,n);var s=n.icon&&e(Icon,{styleName:"@icon",attrs:{name:n.icon}});return e("a",genFunctionalData(a,{styleName:"@button $type :mini :plain :inline :disabled :white-space",attrs:{href:"javascript:;"}}),[s].concat(i||[]))}},customRenderer=function(e){return _reduce(e,function(e,t,n){var a="render"+_upperFirst(n);return e.props[a]=Function,e.methods["$"+a]=function(){return(this[a]||this.$scopedSlots[n]||t).apply(this,arguments)},e},{props:{},methods:{}})},VNodeType$1={type:null,vnode:!0},normalizePropVNode=function(e){return _isObjectLike(e)?e:_toString(e)},extractVNodes={VNodeType:VNodeType$1,computed:{VNodeProps:function(){return this.extractVNodeProps()}},methods:{extractVNodeProps:function(e){return void 0===e&&(e=this.$options.props),_reduce(e,function(e,t,n){return t.vnode&&e.push([n,t.slot||n]),e},[])},extractVNodes:function(e){var t=void 0===e?{}:e,n=t.VNodeProps,a=void 0===n?this.VNodeProps:n,i=t.slots,s=void 0===i?this.$slots:i,r=t.props,o=void 0===r?this.$props:r;return a.reduce(function(e,t){var n=t[0],a=t[1];return e[n]=s[a]||s[n]||normalizePropVNode(o[n]),e},{children:s.default})}}},styles$2={},CHECKBOX=1,RADIO=2,AGREE=3,choice={name:"f-choice",alias:["f-checkbox","f-radio"],mixins:[CSSModules(styles$2),customRenderer({box:function(e){var t=e.selected;return this.$createElement(Icon,{attrs:{name:t?this.actualSelectedIcon:this.actualIcon}})}}),betterSync({prop:"selectedValue",event:"change"})],props:{selectedValue:{type:null,sync:!0},value:null,icon:String,selectedIcon:String},computed:{type:function(){var e=this.actualSelectedValue;return _isBoolean(e)?AGREE:_isArray(e)?CHECKBOX:RADIO},nativeType:function(){return this.type===RADIO?"radio":"checkbox"},actualIcon:function(){return this.icon||(this.type===RADIO?"f-icon-radiobox":"f-icon-checkbox")},actualSelectedIcon:function(){return this.selectedIcon||(this.type===RADIO?"f-icon-radiobox-checked":"f-icon-checkbox-checked")},selected:function(){var e=this.type,t=this.actualSelectedValue,n=this.value;return e===CHECKBOX?t.indexOf(n)>=0:t===n}},methods:{handleChange:function(e){var t,n=e.target.checked,a=this.type,i=this.actualSelectedValue,s=this.value;a===CHECKBOX?(t=i.slice(),n?t.push(s):t.splice(t.indexOf(s),1)):t=a===AGREE?n:s,this.syncSelectedValue(t)}},render:function(e){return e("label",{styleName:"@choice :selected"},[this.$createElement("input",{styleName:"input",attrs:{type:this.nativeType},domProps:{checked:this.selected},on:{change:this.handleChange}}),this.$createElement("div",{styleName:"box"},[this.$renderBox({selected:this.selected})]),this.$slots.default])}},styles$3={},PLACEMENT_PROPS={top:Boolean,right:Boolean,bottom:Boolean,left:Boolean},PLACEMENTS=Object.keys(PLACEMENT_PROPS),Hairline={name:"f-hairline",functional:!0,props:Object.assign({tag:{type:String,default:"div"},color:String,all:Boolean},PLACEMENT_PROPS),render:function(e,t){var n=t.props,a=t.data,i=t.children;e=createElement(e,styles$3,n);var s=n.all?PLACEMENTS:PLACEMENTS.filter(function(e){return n[e]}),r={color:n.color},o=s.map(function(t){return e("div",{styleName:"@line "+t,style:r})});return e(n.tag,genFunctionalData(a,{styleName:"@hairline"}),[o].concat(i||[]))}},styles$4={},ARROWS=["right","down","left","up"],propDescriptors={header:VNodeType,body:VNodeType,footer:VNodeType,left:VNodeType,right:VNodeType,icon:VNodeType,title:Object.assign({},VNodeType,{slot:"default"}),desc:VNodeType,extra:VNodeType,note:VNodeType,tag:{type:String,default:"div"},infoWidth:String,arrow:{type:[Boolean,String],default:!1,validator:function(e){return _isBoolean(e)||ARROWS.indexOf(e)>=0}}},VNodeProps=extractVNodes.methods.extractVNodeProps(propDescriptors),Item={name:"f-item",alias:["f-list-item"],functional:!0,props:propDescriptors,render:function(e,t){var n=t.props,a=t.data,i=t.slots;e=createElement(e,styles$4,n);var s=extractVNodes.methods.extractVNodes({slots:i(),props:n,VNodeProps:VNodeProps}),r=s.header,o=s.body,l=s.footer,u=s.left,c=s.right,d=s.icon,p=s.title,h=s.desc,f=s.extra,m=s.note,y=_isBoolean(n.arrow)?n.arrow&&"right":n.arrow;return e(Hairline,genFunctionalData(a,{styleName:"@item",attrs:{bottom:!0}}),[r&&e("div",{styleName:"@header"},[r]),e("div",{styleName:"@body"},[o||[u&&e("div",{styleName:"@left"},[u]),e("div",{styleName:"@middle"},[p&&e("div",{styleName:"@info",style:"width: "+n.infoWidth+";"},[d&&e("div",{styleName:"@icon"},[_isString(d)?e(Icon,{attrs:{name:d}}):d]),p&&e("div",{styleName:"@outline"},[e("div",{styleName:"@title"},[p]),h&&e("div",{styleName:"@desc"},[h])])]),f&&e("div",{styleName:"@extra"},[f])]),Boolean(m||c)&&e("div",{styleName:"@right"},[m&&e("div",{styleName:"@note"},[m]),c]),e(Icon,{styleName:"@arrow",style:"display: "+(y?"block":"none")+";",attrs:{name:"f-icon-arrow-"+(y||"right")}})]]),l&&e("div",{styleName:"@footer"},[l])])}},styles$5={},field={name:"f-field",alias:["f-form-item"],inheritAttrs:!1,inject:{Form:{default:null}},provide:function(){return{Field:this}},mixins:[extractVNodes,CSSModules(styles$5)],props:{label:VNodeType,labelWidth:{type:String,default:function(){return this.Form?this.Form.labelWidth:"4.5em"}}},render:function(e){var t=this.extractVNodes().label;return e(Item,{styleName:"@field",attrs:Object.assign({},this.$attrs,{infoWidth:this.labelWidth,title:t,extra:this.$slots.default})})}},styles$6={},List={name:"f-list",functional:!0,props:{tag:{type:String,default:"div"},border:{type:Boolean,default:!0},offset:{type:Boolean,default:!0}},render:function(e,t){var n=t.props,a=t.data,i=t.children;e=createElement(e,styles$6,n);var s=Boolean(n.border);return e(Hairline,genFunctionalData(a,{styleName:"@list :offset",attrs:{tag:n.tag,top:s,bottom:s}}),i)}},styles$7={},form={name:"f-form",inheritAttrs:!1,provide:function(){return{Form:this}},mixins:[betterSync({prop:"model",event:"change"}),CSSModules(styles$7)],props:{labelWidth:{type:String,default:"4.5em"},model:{type:Object,sync:!0},rules:Object},render:function(e){return e(List,{styleName:"@form",attrs:Object.assign({},this.$attrs,{tag:"form"})},this.$slots.default)}},styles$8={},Input={name:"f-input",mixins:[betterSync({prop:"value",event:"input"}),CSSModules(styles$8)],props:{tag:{type:String,default:"input"},value:{type:[String,Number],sync:!0},type:{type:String,default:"text"},validator:Function,lazy:{type:Boolean,default:!0}},methods:{transformValue:function(e,t){if(t)return e;if("number"===this.type){var n=e.newValue.trim();""!==n&&(e.newValue=_toNumber(n))}return e},handleInput:function(e){var t=e.target.value;_isFunction(this.validator)?this.validator(t,e)?this.syncValue(t):e.target.value=this.actualValue:this.syncValue(t)}},render:function(e){var t;return e(this.tag,{styleName:"@input",attrs:{type:this.type},domProps:{value:this.actualValue},on:(t={},t[this.lazy?"change":"input"]=this.handleInput,t)})}},styles$9={},INPUT_NUMBER_TYPES=["default","primary","success","warning","danger"],inputNumber={name:"f-input-number",mixins:[betterSync({prop:"value",event:"input"}),CSSModules(styles$9)],props:{type:{type:String,default:INPUT_NUMBER_TYPES[0],validtor:function(e){return INPUT_NUMBER_TYPES.indexOf(e)>=0}},value:{type:[String,Number],sync:!0},min:{type:Number,default:Number.MIN_VALUE},max:{type:Number,default:Number.MAX_VALUE},step:{type:Number,default:1},disableInput:Boolean,block:Boolean,disabled:Boolean},computed:{minusDisabled:function(){return this.disabled||this.actualValue-this.step<this.min},plusDisabled:function(){return this.disabled||this.actualValue+this.step>this.max},Minus:function(){return this.$createElement("a",{styleName:"@minus button disabled=minusDisabled",attrs:{href:"javascript:;"},on:{click:this.handleMinus}},[this.$createElement(Icon,{attrs:{name:"f-icon-minus-empty"}})])},Plus:function(){return this.$createElement("a",{styleName:"@plus button disabled=plusDisabled",attrs:{href:"javascript:;"},on:{click:this.handlePlus}},[this.$createElement(Icon,{attrs:{name:"f-icon-plus-empty"}})])},InputBox:function(){return this.$createElement("div",{styleName:"@input-box :disabled"},[this.$createElement(Input,{styleName:"@input",attrs:{type:"number",readonly:this.disableInput,validator:this.validateValue},model:{value:this.actualValue,callback:this.syncValue},ref:"input"})])}},methods:{transformValue:function(e){return e.newValue=_toNumber(e.newValue),e},handleMinus:function(){this.syncValue(this.actualValue-this.step)},handlePlus:function(){this.syncValue(this.actualValue+this.step)},validateValue:function(e){return e>=this.min&&e<=this.max}},render:function(e){return e("div",{styleName:"@input-number :block"},[this.Minus,this.InputBox,this.Plus])}},styles$10={},select={name:"f-select",mixins:[betterSync({prop:"value",event:"change"}),CSSModules(styles$10)],props:{value:{type:null,sync:!0},data:{type:Array,required:!0}},data:function(){return{lastSelectedIndex:null}},computed:{selectedIndex:function(){return null!==this.lastSelectedIndex?this.lastSelectedIndex:_findIndex(this.data,["value",this.actualValue])},Options:function(){var e=this;return this.data.map(function(t){return e.$createElement("option",{attrs:{disabled:t.disabled}},[t.label])})}},methods:{handleChange:function(e){var t=e.target.selectedIndex;-1!==t&&this.data[t]&&(this.lastSelectedIndex=t,this.syncValue(this.data[t].value))}},render:function(e){return e("select",{styleName:"@select",domProps:{selectedIndex:this.selectedIndex},on:{change:this.handleChange}},this.Options)}},styles$11={},_switch={name:"f-switch",mixins:[betterSync({prop:"value",event:"change"}),CSSModules(styles$11)],props:{value:{type:null,sync:!0},beforeChange:Function,valueMap:{type:Object,default:function(){return{on:!0,off:!1}},validator:function(e){return _has(e,"on")&&_has(e,"off")}},disabled:Boolean},methods:{transformValue:function(e,t){var n=this;return _mapValues(e,function(e){return t?n.valueMap.on===e:n.valueMap[e?"on":"off"]})},done:function(){this.syncValue(!this.actualValue)},handleClick:function(){this.disabled||(this.beforeChange?this.beforeChange(this.done):this.done())}},render:function(e){return e("div",{styleName:"@switch on=actualValue :disabled",on:{click:this.handleClick}})}},styles$12={},textarea={name:"f-textarea",inheritAttrs:!1,mixins:[betterSync({prop:"value",event:"input"}),CSSModules(styles$12)],props:{value:{type:[String,Number],sync:!0},rows:{type:[Number,String],default:2}},render:function(e){return e(Input,{styleName:"@textarea",attrs:Object.assign({},this.$attrs,{tag:"textarea",rows:this.rows}),model:{value:this.actualValue,callback:this.syncValue}})}},components=Object.freeze({button:button,choice:choice,field:field,form:form,hairline:Hairline,icon:Icon,input:Input,inputNumber:inputNumber,item:Item,list:List,select:select,switch:_switch,textarea:textarea});function install(e){install.installed||(e.prototype.$log=console.log,_forOwn(components,function(t){t.alias&&_castArray(t.alias).forEach(function(n){return e.component(n,t)}),e.component(t.name,t)}),install.installed=!0)}Object.defineProperty(components,"install",{value:install}),module.exports=components;
